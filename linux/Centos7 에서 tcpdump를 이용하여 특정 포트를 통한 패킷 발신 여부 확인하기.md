Centos7 환경에서 특정 포트를 통해 외부로 패킷을 발신하는 service 가 있는데 수신측에서 데이터를 받았는지 확인되지않아 실제로 패킷이 발신되는 중인지 확인이 필요한 경우가 발생하여 기록합니다.


</br>

# tcpdump
tcpdump는 대부분의 유닉스 계열에서 네트워크카드를 통해 송수신 되는 패킷을 가로채고 표시해주는 소프트웨어 입니다.
참고로 유닉스 계열에서 TcpDump가 있다면 윈도우 계열에서는 WinDump라는 것이 있습니다.


</br>

# tcpdump 설치
tcpdump 가 설치되어있지 않다면 설치를 진행합니다.
~~~shell
yum install tcpdump
~~~

</br>

# 네트워크 디바이스 정보 얻기
먼저 현재 환경에서 네트워크 디바이스 정보를 알아야합니다.
아래와 같은 터미널 명령어를 통하여 디바이스 정보를 얻을 수 있습니다.

</br>

~~~shell
nmcli d
~~~

</br>

명령어를 실행해보면 아래 이미지와 같이 DEVICE, TYPE, STATE CONNECTION 정보를 얻을 수 있는데 STATE가 연결됨 상태인 DEVICE 이름을 기억합니다.

</br>


<이미지>

</br>


# tcpdump 로 특정 포트를 통하여 발신되는 패킷 확인
tcmdump 를 통하여 특정 포트를 통하여 발신되는 중인 패킷을 확인할 수 있습니다.
저 같은 경우 rsyslog 를 외부 서버로 보내는 중이며 포트는 514, 프로토콜은 UDP 를 사용중입니다.

</br>

이때 패킷을 확인하는 방법은 아래와 같습니다.
~~~shell
tcpdump -i ens160 udp port 514
~~~






